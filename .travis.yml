--- 
addons: 
  firefox: "43.0"
android: 
  components:
    - platform-tools		
    - tools
    - build-tools-22.0.1
    - android-22
    - sys-img-armeabi-v7a-android-22
    - add-on
    - extra
  licenses: 
    - android-sdk-preview-license-52d11cd2
    - android-sdk-license-.+
    - google-gdk-license-.+
before_script:
  - "nvm install node 4"
  - "npm install -g appium"
  - "nohup xvfb-run -a appium --session-override &"
  - "echo no | android create avd --force -n test -t android-22 --abi armeabi-v7a"
  - "emulator -avd test -no-audio -skin 480x800 -no-window -gpu off -wipe-data&"
  - android-wait-for-emulator
  - "npm install -g chromedriver"
  - "npm install -g protractor"
  - "npm install -g protractor-html-screenshot-reporter"
  - "npm install -g wd"
  - "npm install -g wd-bridge"
  - "npm install jasmine-reporters"
  - "npm install mkdirp"
  - "npm install math"
  - "npm install properties-reader"
  - "npm install properties"
  - "npm install path"
  - "npm install underscore"
  - "npm install -g android"
  - "webdriver-manager update"
cache: false
jdk: oraclejdk7
language: android
script:
  - "adb shell input keyevent 82 &"
  - "protractor conf/e2e_signup.js"
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - "protractor conf/e2e_create.js"
  - "sh -e /etc/init.d/xvfb stop"
  - "nohup xvfb-run -a appium --session-override &"
  - "sleep 1m"
  - "adb shell input keyevent 82 &"
  - "protractor conf/e2e_checkout.js"
sudo: false