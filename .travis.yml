--- 
addons: 
  android: ~
  artifacts: true
  components: 
    - tools
    - platform-tools
    - build-tools-23.0.2
    - android-23
  sauce_connect: true
before_install: 
  - "sudo apt-get install libxss1 libappindicator1 libindicator7"
  - "wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb"
  - "sudo apt-get install -f"
  - "sudo dpkg -i google-chrome*.deb"
  - "sudo apt-get install openjdk-7-jdk"
  - "wget http://dl.google.com/android/android-sdk_r24.2-linux.tgz"
  - "tar -xvf android-sdk_r24.2-linux.tgz"
  - "cd android-sdk-linux/tools"
  - "( while [ 1 ]; do sleep 5; echo y; done ) | ./android update sdk --no-ui --filter platform-tools,build-tools,tools,extra-android-support,android-22"
  - "export PATH=${PATH}:$HOME/sdk/android-sdk-linux/platform-tools:$HOME/sdk/android-sdk-linux/tools:$HOME/sdk/android-sdk-linux/build-tools/22.0.1/"
before_script:
  - "npm install -g bower"
  - "npm install -g chromedriver"
  - "npm install -g protractor"
  - "npm install -g protractor-html-screenshot-reporter"
  - "npm install -g wd"
  - "npm install -g wd-bridge"
  - "npm install jasmine-reporters"
  - "npm install -g appium@1.4.16"
  - "npm install -g chrome"
  - "npm install mkdirp"
  - "npm install underscore"
  - "export ANDROID_HOME=~/android-sdk-linux"
  - "export PATH=$ANDROID_HOME/tools:$PATH"
  - "export PATH=$ANDROID_HOME/platform-tools:$PATH"
  - "webdriver-manager update"
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - "sleep 3"
  - "echo no | android create avd --force -n test -t android-19 --abi x86"
  - "emulator -avd test -no-skin -no-audio -no-window &"
  - android-wait-for-emulator
  - "adb shell input keyevent 82 &"
  - appium
dist: trusty
env: 
  global: 
    - 
      secure: bartvitaly
    - 
      secure: 96fe819c-b6e1-472f-9e98-5793cacb1d62
language: node_js
node_js: 
  - "4"
script: 
  - "protractor conf/sauce.js"
